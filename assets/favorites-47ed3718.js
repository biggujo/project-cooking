import{R as m,c as h,h as C,s as L}from"./scroll-up-339cdb6e.js";import"./icons-d36db4f8.js";const f="All categories",n=12;let p=1;const o={favoritesCategories:document.querySelector(".fav-categories"),favoritesList:document.getElementById("rendered-cards-for-favourites")};o.favoritesCategories.addEventListener("click",S);o.favoritesList.addEventListener("click",A);E();function E(){I()?y():N()}function S({target:e}){if(e.nodeName!=="BUTTON")return;const t=e.dataset.category;R(),b(t),d(),c({givenCategory:t}).catch(console.log).finally(()=>g())}function A({target:e}){e.nodeName!=="svg"&&e.nodeName!=="use"||(d(),c({givenCategory:e.textContent}).then(t=>{u(t),g()}))}function N(){d(),c({page:p}).then(e=>{console.log(e),u(e),g()}).catch(console.log)}async function c({givenCategory:e,page:t}){try{const i=JSON.parse(localStorage.getItem("favorites"));o.favoritesList.innerHTML="";const v=i.map(a=>new m().init(a));let s=await Promise.all(v),r=s;return e&&e!==f&&(t&&(s=s.slice(t*n,(t+1)*n)),r=s.filter(a=>a.recipeData.category===e)),document.getElementById("pagination").style.display=r.length>n?"block":"none",r.length>n&&(document.getElementById("pagination").style.display="block",t||(t=1),t===1&&h({totalItems:r.length,itemsPerPage:n,afterMove:a=>{c({givenCategory:e,page:a.page})}})),t&&(r=r.slice((t-1)*n,t*n)),r=new Set(r.map(a=>{const l=document.createElement("li");return l.classList.add("fav-categories-item"),l.appendChild(a.recipeCardEl),o.favoritesList.appendChild(l),a.recipeData.category})),r}catch(i){console.log(i)}}function u(e){o.favoritesCategories.innerHTML="",(e===null||e.size===0)&&y(),t(f),[...e].sort().forEach(t);function t(i){o.favoritesCategories.insertAdjacentHTML("beforeend",`<button data-category='${i}' class='button-fav-category${i===f?" button-fav-category-active":""}'>${i}</button>`)}}function R(){o.favoritesCategories.querySelectorAll("[data-category]").forEach(t=>t.classList.remove("button-fav-category-active"))}function b(e){o.favoritesCategories.querySelector(`[data-category="${e}"]`).classList.add("button-fav-category-active")}function d(){o.favoritesList.style.height=o.favoritesList.offsetHeight+"px"}function g(){o.favoritesList.style.height="auto"}function I(){try{const e=JSON.parse(localStorage.getItem("favorites"));return e===null||e.length===0}catch(e){console.log(e)}}function y(){document.querySelector(".fav-no-recipes").classList.remove("is-hidden"),document.querySelector(".fav-categories-container").style.display="none"}C();L();
