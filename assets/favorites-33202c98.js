import{n as c,R as h,c as C,h as L,s as p}from"./scroll-up-9bc39f2f.js";import"./icons-f37aa445.js";const d="All categories",n=12;let E=1;const i={favoritesCategories:document.querySelector(".fav-categories"),favoritesList:document.getElementById("rendered-cards-for-favourites")};i.favoritesCategories.addEventListener("click",S);i.favoritesList.addEventListener("click",A);N();function N(){P()?v():R()}function S({target:e}){if(e.nodeName!=="BUTTON")return;const t=e.dataset.category;b(),I(t),u(),l({givenCategory:t}).catch(c.Notify.failure).finally(()=>g())}function A({target:e}){e.nodeName!=="svg"&&e.nodeName!=="use"||(u(),l({givenCategory:e.textContent}).then(t=>{y(t),g()}))}function R(){u(),l({page:E}).then(e=>{y(e),g()}).catch(c.Notify.failure)}async function l({givenCategory:e,page:t}){try{const a=JSON.parse(localStorage.getItem("favorites"));i.favoritesList.innerHTML="";const m=a.map(r=>new h().init(r));let s=await Promise.all(m),o=s;return e&&e!==d&&(t&&(s=s.slice(t*n,(t+1)*n)),o=s.filter(r=>r.recipeData.category===e)),document.getElementById("pagination").style.display=o.length>n?"block":"none",o.length>n&&(document.getElementById("pagination").style.display="block",t||(t=1),t===1&&C({totalItems:o.length,itemsPerPage:n,afterMove:r=>{l({givenCategory:e,page:r.page})}})),t&&(o=o.slice((t-1)*n,t*n)),o=new Set(o.map(r=>{const f=document.createElement("li");return f.classList.add("fav-categories-item"),f.appendChild(r.recipeCardEl),i.favoritesList.appendChild(f),r.recipeData.category})),o}catch(a){c.Notify.failure(a)}}function y(e){i.favoritesCategories.innerHTML="",(e===null||e.size===0)&&v(),t(d),[...e].sort().forEach(t);function t(a){i.favoritesCategories.insertAdjacentHTML("beforeend",`<button data-category='${a}' class='button-fav-category${a===d?" button-fav-category-active":""}'>${a}</button>`)}}function b(){i.favoritesCategories.querySelectorAll("[data-category]").forEach(t=>t.classList.remove("button-fav-category-active"))}function I(e){i.favoritesCategories.querySelector(`[data-category="${e}"]`).classList.add("button-fav-category-active")}function u(){i.favoritesList.style.height=i.favoritesList.offsetHeight+"px"}function g(){i.favoritesList.style.height="auto"}function P(){try{const e=JSON.parse(localStorage.getItem("favorites"));return e===null||e.length===0}catch(e){c.Notify.failure(e)}}function v(){document.querySelector(".fav-no-recipes").classList.remove("is-hidden"),document.querySelector(".fav-categories-container").style.display="none"}L();p();
