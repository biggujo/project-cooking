import{P as m,R as v,h,s as C}from"./scroll-up-9d9a1817.js";import"./icons-a7facc4b.js";const b=document.getElementById("pagination"),L=document.documentElement.clientWidth;function E({totalItems:e,itemsPerPage:t,afterMove:n}){const r=new m(b,{totalItems:e,itemsPerPage:t,visiblePages:L<768?2:3,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="pag__page-btn tui-page-btn">{{page}}</a>',currentPage:'<strong class="pag__current-page tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="pag__btn-move tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="pag__btn-move pag__btn-disabled tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}});return r.on("afterMove",n),r}const g="All categories",s=12;let S=1;const a={favoritesCategories:document.querySelector(".fav-categories"),favoritesList:document.getElementById("rendered-cards-for-favourites")};a.favoritesCategories.addEventListener("click",A);a.favoritesList.addEventListener("click",N);_();function _(){R()?y():P()}function A({target:e}){if(e.nodeName!=="BUTTON")return;const t=e.dataset.category;B(),I(t),f(),l({givenCategory:t}).catch(console.log).finally(()=>u())}function N({target:e}){e.nodeName!=="svg"&&e.nodeName!=="use"||(f(),l({givenCategory:e.textContent}).then(t=>{p(t),u()}))}function P(){f(),l({page:S}).then(e=>{console.log(e),p(e),u()}).catch(console.log)}async function l({givenCategory:e,page:t}){try{const n=JSON.parse(localStorage.getItem("favorites"));a.favoritesList.innerHTML="";const r=n.map(o=>new v().init(o));let c=await Promise.all(r),i=c;return e&&e!==g&&(t&&(c=c.slice(t*s,(t+1)*s)),i=c.filter(o=>o.recipeData.category===e)),document.getElementById("pagination").style.display=i.length>s?"block":"none",i.length>s&&(document.getElementById("pagination").style.display="block",t||(t=1),t===1&&E({totalItems:i.length,itemsPerPage:s,afterMove:o=>{l({givenCategory:e,page:o.page})}})),t&&(i=i.slice((t-1)*s,t*s)),i=new Set(i.map(o=>{const d=document.createElement("li");return d.classList.add("fav-categories-item"),d.appendChild(o.recipeCardEl),a.favoritesList.appendChild(d),o.recipeData.category})),i}catch(n){console.log(n)}}function p(e){a.favoritesCategories.innerHTML="",(e===null||e.size===0)&&y(),t(g),[...e].sort().forEach(t);function t(n){a.favoritesCategories.insertAdjacentHTML("beforeend",`<button data-category='${n}' class='button-fav-category${n===g?" button-fav-category-active":""}'>${n}</button>`)}}function B(){a.favoritesCategories.querySelectorAll("[data-category]").forEach(t=>t.classList.remove("button-fav-category-active"))}function I(e){a.favoritesCategories.querySelector(`[data-category="${e}"]`).classList.add("button-fav-category-active")}function f(){a.favoritesList.style.height=a.favoritesList.offsetHeight+"px"}function u(){a.favoritesList.style.height="auto"}function R(){try{const e=JSON.parse(localStorage.getItem("favorites"));return e===null||e.length===0}catch(e){console.log(e)}}function y(){document.querySelector(".fav-no-recipes").classList.remove("is-hidden"),document.querySelector(".fav-categories-container").style.display="none"}h();C();
